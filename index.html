<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Benny & Liam Time (BLT)</title>
  <meta name="description" content="Playful single-page clock for Benny & Liam Time (BLT) â€” midpoint between Melbourne & Brisbane during DST (South Australian time). Includes Aussie zone glances, theme and 12/24h toggles." />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root {
      --bg: #0b0b12;
      --panel: #13131e;
      --panel-2: #181826;
      --text: #f7f8fc;
      --muted: #a6aec2;
      --ring: rgba(125, 211, 252, 0.35);
      --accent: #7dd3fc;
      --accent-2: #f0abfc;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
    }
    :root.light {
      --bg: #f7fafc;
      --panel: #ffffff;
      --panel-2: #eef2f8;
      --text: #0b1020;
      --muted: #5b6271;
      --ring: rgba(2, 132, 199, 0.18);
      --accent: #0284c7;
      --accent-2: #a21caf;
      --shadow: 0 10px 24px rgba(2, 8, 23, 0.08);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background:
        radial-gradient(900px 650px at 80% -20%, rgba(125,211,252,0.16), transparent 60%),
        radial-gradient(900px 700px at -10% 30%, rgba(240,171,252,0.13), transparent 60%),
        var(--bg);
      color: var(--text);
      display: grid; place-items: center; padding: 32px 16px; min-height: 100dvh;
    }

    .wrap { width: 100%; max-width: 820px; display: grid; gap: 16px; }

    header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    .brand { display: flex; align-items: center; gap: 10px; }
  .logo { width: 36px; height: 36px; border-radius: 10px; background: none; box-shadow: var(--shadow); display:flex; align-items:center; justify-content:center; }
    h1 { font-size: clamp(22px, 3.4vw, 28px); margin: 0; letter-spacing: 0.2px; }

    .controls { display: flex; gap: 8px; align-items: center; }
    .btn { padding: 8px 12px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.14); background: var(--panel); color: var(--text); cursor: pointer; font-weight: 600; font-size: 13px; box-shadow: var(--shadow); }
    .btn:hover { border-color: var(--ring); }

    .hero { display: grid; gap: 14px; margin-top: 8px; }
    .heroCard {
      border-radius: 24px; border: 1px solid rgba(255,255,255,0.10);
      background:
        linear-gradient(180deg, rgba(2,132,199,0.16), rgba(0,0,0,0.02)),
        var(--panel);
      padding: 26px 22px; box-shadow: var(--shadow);
    }
    .label { color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: 0.12em; text-align:center; }
    .big { font-variant-numeric: tabular-nums; font-size: clamp(52px, 9vw, 92px); font-weight: 800; line-height: 1.03; text-align: center; }
    .subRow { display: flex; gap: 10px; align-items: center; justify-content: center; color: var(--muted); margin-top: 8px; flex-wrap: wrap; }
    .chip { font-size: 12px; padding: 6px 10px; border-radius: 999px; border: 1px dashed rgba(255,255,255,0.16); color: var(--muted); background: var(--panel-2); }
    .date { margin-top: 4px; font-size: 13px; color: var(--muted); text-align: center; font-variant-numeric: tabular-nums; }

    .zonesCard { border-radius: 18px; border: 1px solid rgba(255,255,255,0.10); background: var(--panel); padding: 14px; overflow: hidden; }
  .zones { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px; }
  .zoneItem { display: grid; grid-template-rows: auto auto auto; gap: 4px; padding: 8px 10px; border-radius: 10px; background: var(--panel-2); border: 1px solid rgba(255,255,255,0.08); transition: transform 120ms ease, box-shadow 120ms ease; }
  .zoneItem:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
  .zoneLine1 { font-weight: 700; font-size: 13px; }
  .zoneLine2 { display: flex; align-items: baseline; justify-content: space-between; gap: 6px; font-variant-numeric: tabular-nums; }
  .zoneId { color: var(--muted); font-size: 12px; }
  .zoneTime { font-weight: 800; }
  .zoneLine3 { color: var(--muted); font-size: 11px; font-weight: 700; }

  /* Mobile: collapse zones list to first 3 when .zones has .collapsed */
  .zones.collapsed .zoneItem:nth-child(n+4) { display: none; }
  .zonesToggle {
    display: none; margin: 8px 0 6px; text-align: center;
  }
  .zonesToggle .btn { padding: 6px 10px; font-size: 13px; }
  @media (max-width: 640px) {
    .zonesToggle { display: block; }
  }
  .zonesToggle .chev { margin-right: 8px; transition: transform 180ms ease; }
  .zonesToggle .btn[aria-expanded="true"] .chev { transform: rotate(180deg); }

  footer { color: var(--muted); font-size: 12px; text-align: center; margin-top: 6px; margin-bottom: 36px; }

    .explain { border-radius: 14px; border: 1px solid rgba(255,255,255,0.10); background: var(--panel); padding: 14px; color: var(--muted); font-size: 14px; }
    /* Benny GIF overlay - centered in middle of viewport */
    .benny-overlay {
      position: fixed;
      left: 0; top: 0; right: 0; bottom: 0;
      display: none; /* toggled via JS or active class */
      align-items: center;
      justify-content: center;
      z-index: 1200;
    }
    .benny-overlay.active { display: flex; }
    /* Backdrop that dims the page and receives taps/clicks */
    .benny-backdrop {
      position: absolute; left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(2,6,23,0.6);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      border-radius: 0;
    }
    .benny-card {
      position: relative;
      max-width: 92vw;
      max-height: 86vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      border-radius: 12px;
      padding: 6px;
      z-index: 1210; /* above backdrop */
    }
    .benny-close {
      position: absolute;
      right: 6px; top: 6px;
      background: rgba(0,0,0,0.45);
      border: 0; color: white; width: 36px; height: 36px; border-radius: 999px;
      display: inline-flex; align-items: center; justify-content: center; font-weight: 700;
      cursor: pointer; box-shadow: 0 6px 18px rgba(0,0,0,0.5);
    }
    .benny-close:focus { outline: 2px solid var(--accent); }
    .benny-card img {
      width: auto;
      height: auto;
      max-width: 86vw;
      max-height: 80vh;
      display: block;
      border-radius: 8px;
      box-shadow: 0 12px 36px rgba(0,0,0,0.6);
    }
  .benny-trigger { text-decoration: none; cursor: pointer; color: inherit; touch-action: manipulation; }
  .benny-trigger:hover, .benny-trigger:focus { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- Clock icon -->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none" opacity="0.9" />
            <path d="M12 7v5l3 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <h1>Benny &amp; Liam Time (BLT)</h1>
      </div>
      <div class="controls">
        <button class="btn" id="fmtBtn" aria-pressed="false" title="Toggle 12/24-hour">24-hour</button>
        <button class="btn" id="themeBtn" aria-pressed="false" title="Toggle light/dark">Dark</button>
      </div>
    </header>

    <section class="hero">
      <div class="heroCard">
  <div class="label">Benny &amp; Liam Time (BLT)</div>
        <div class="big" id="bltTime">00:00:00</div>
        <div class="subRow">
          <span class="chip hoverSwap" id="bltZone" data-base="Australia/BLT" data-hover="Australia/Adelaide">Australia/BLT</span>
          <span class="chip hoverSwap" id="bltAbbrev" data-base="BLT" data-hover="ACDT">BLT</span>
          <span class="chip" id="bltOffset">UTC+10:30</span>
        </div>
        <div class="date" id="bltDate">Friday, 1 Jan 1970</div>
      </div>
    </section>

    <section class="zonesCard">
      <div class="zonesToggle">
        <button id="zonesToggleBtn" class="btn" aria-expanded="false">
          <svg class="chev" width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="zonesToggleText">Show all times</span>
        </button>
      </div>
      <div class="zones" id="zones"></div>
    </section>

    <section class="explain">
      <div class="label" style="text-align:left;">About this website</div>
      <p>
        <strong>Benny & Liam Time (BLT)</strong> is a playful midpoint between Melbourne and Brisbane during daylight saving â€” it matches South Australiaâ€™s offset. This site highlights BLT at the top and shows quick references for other Australian time zones below.
      </p>
    </section>

    <footer>
      Made in Tasmania ðŸ‡¦ðŸ‡º â€” Times use the browserâ€™s <code>Intl</code> API (IANA time zones).
    </footer>
  </div>

  <!-- Benny GIF overlay (centered) -->
  <div id="bennyOverlay" class="benny-overlay" aria-hidden="true">
    <div class="benny-backdrop" id="bennyBackdrop" tabindex="0" aria-hidden="true"></div>
    <div class="benny-card" role="dialog" aria-modal="true" aria-label="Benny GIF">
  <button class="benny-close" id="bennyClose" aria-label="Close Benny">âœ•</button>
  <!-- GIF sourced from Giphy per request -->
  <img id="bennyImg" src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExa3Ryc3E2bGI0eDkyZXZnbmVrYXJsMnhxanJpcW50NjJwZjg2OW9mcCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/7BDX9W6XPx6Q8/giphy.gif" alt="Benny GIF" />
    </div>
  </div>

  <script>
    const BLT_TZ = 'Australia/Adelaide';
    const ZONES = [
      { label: 'Melbourne (VIC)', tz: 'Australia/Melbourne' },
      { label: 'Brisbane (QLD)', tz: 'Australia/Brisbane' },
      { label: 'Sydney (NSW)', tz: 'Australia/Sydney' },
      { label: 'Adelaide (SA)', tz: 'Australia/Adelaide' },
      { label: 'Perth (WA)', tz: 'Australia/Perth' },
      { label: 'Hobart (TAS)', tz: 'Australia/Hobart' },
      { label: 'Darwin (NT)', tz: 'Australia/Darwin' },
      { label: 'Canberra (ACT)', tz: 'Australia/Sydney' },
      { label: 'UTC', tz: 'UTC' }
    ];

    const state = {
      hour12: JSON.parse(localStorage.getItem('blt_hour12') ?? 'false'),
      light: JSON.parse(localStorage.getItem('blt_light') ?? 'false')
    };

  const fmtBtn = document.getElementById('fmtBtn');
  const themeBtn = document.getElementById('themeBtn');
  const zonesEl = document.getElementById('zones');

    function persist() {
      localStorage.setItem('blt_hour12', JSON.stringify(state.hour12));
      localStorage.setItem('blt_light', JSON.stringify(state.light));
    }

    function applyTheme() {
      document.documentElement.classList.toggle('light', state.light);
      themeBtn.textContent = state.light ? 'Light' : 'Dark';
    }

    function applyFormat() {
      fmtBtn.textContent = state.hour12 ? '12-hour' : '24-hour';
    }

    themeBtn.addEventListener('click', () => { state.light = !state.light; applyTheme(); persist(); });
    fmtBtn.addEventListener('click', () => { state.hour12 = !state.hour12; applyFormat(); tick(); persist(); });

    function setupHoverSwap(el) {
      const base = el.getAttribute('data-base');
      const hover = el.getAttribute('data-hover');
      el.addEventListener('mouseenter', () => { el.textContent = hover; });
      el.addEventListener('mouseleave', () => { el.textContent = base; });
    }

    function formatTime(date, timeZone, hour12) {
      const timeFmt = new Intl.DateTimeFormat(undefined, {
        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12, timeZone
      });
      const dateFmt = new Intl.DateTimeFormat(undefined, {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone
      });
      return { time: timeFmt.format(date), date: dateFmt.format(date) };
    }

    function tzAbbrev(date, timeZone) {
      try {
        const abbrFmt = new Intl.DateTimeFormat(undefined, { timeZone, timeZoneName: 'short' });
        const parts = abbrFmt.formatToParts(date);
        const zonePart = parts.find(p => p.type === 'timeZoneName');
        return zonePart ? zonePart.value : '';
      } catch { return ''; }
    }

    function offsetForZone(date, timeZone) {
      // Try a reliable parts-based approach: use formatToParts to get numeric local fields
      try {
        const parts = new Intl.DateTimeFormat('en-GB', {
          timeZone,
          year: 'numeric', month: 'numeric', day: 'numeric',
          hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: false
        }).formatToParts(date);
        const map = {};
        parts.forEach(p => { if (p.type && p.type !== 'literal') map[p.type] = p.value; });
        if (map.year) {
          const y = Number(map.year), m = Number(map.month), d = Number(map.day);
          const hh = Number(map.hour || 0), mm = Number(map.minute || 0), ss = Number(map.second || 0);
          const zonedTs = Date.UTC(y, m - 1, d, hh, mm, ss);
          const diffMin = Math.round((zonedTs - date.getTime()) / 60000);
          const sign = diffMin >= 0 ? '+' : '-';
          const abs = Math.abs(diffMin);
          const hPart = String(Math.floor(abs / 60)).padStart(2, '0');
          const mPart = String(abs % 60).padStart(2, '0');
          return `UTC${sign}${hPart}:${mPart}`;
        }
      } catch (e) {
        // fall through to fallback
      }

      // Fallback: try to compute by comparing locale-converted Date objects
      try {
        const utc = new Date(date.toLocaleString('en-CA', { timeZone: 'UTC', hour12: false }));
        const zoned = new Date(date.toLocaleString('en-CA', { timeZone, hour12: false }));
        const diffMin = Math.round((zoned - utc) / 60000);
        const sign = diffMin >= 0 ? '+' : '-';
        const abs = Math.abs(diffMin);
        const hh = String(Math.floor(abs / 60)).padStart(2, '0');
        const mm = String(abs % 60).padStart(2, '0');
        return `UTC${sign}${hh}:${mm}`;
      } catch (e) {
        return 'â€”';
      }
    }

    function buildZones() {
      zonesEl.innerHTML = '';
      ZONES.forEach(z => {
        const item = document.createElement('div');
        item.className = 'zoneItem';
        item.innerHTML = `
          <div class="zoneLine1">${z.label}</div>
          <div class="zoneLine2">
            <span class="zoneId">${z.tz}</span>
            <span class="zoneTime" data-time>00:00:00</span>
          </div>
          <div class="zoneLine3" data-abbrev>AEDT</div>
        `;
        zonesEl.appendChild(item);
        z._el = item;
      });
    }

    function tick() {
      const now = new Date();
      const bltFmt = formatTime(now, BLT_TZ, state.hour12);
      const bltAbbr = tzAbbrev(now, BLT_TZ);
      document.getElementById('bltTime').textContent = bltFmt.time;
      document.getElementById('bltDate').textContent = bltFmt.date;
      document.getElementById('bltAbbrev').setAttribute('data-hover', bltAbbr || 'ACDT');
      document.getElementById('bltOffset').textContent = offsetForZone(now, BLT_TZ);

      ZONES.forEach(z => {
        const { time, date } = formatTime(now, z.tz, state.hour12);
        const ab = tzAbbrev(now, z.tz);
        z._el.querySelector('[data-time]').textContent = time;
        z._el.querySelector('[data-abbrev]').textContent = ab || '';
        z._el.title = date;
      });
    }

    applyTheme();
    applyFormat();
    document.querySelectorAll('.hoverSwap').forEach(setupHoverSwap);
    buildZones();
    tick();
    setInterval(tick, 1000);

  // Collapse zones on small screens by default and wire toggle
  const zonesToggleBtn = document.getElementById('zonesToggleBtn');
    function updateZonesCollapsed() {
      const isMobile = window.matchMedia('(max-width: 640px)').matches;
      if (isMobile) {
        zonesEl.classList.add('collapsed');
        zonesToggleBtn.textContent = 'Show all times';
        zonesToggleBtn.setAttribute('aria-expanded', 'false');
      } else {
        zonesEl.classList.remove('collapsed');
        zonesToggleBtn.style.display = 'none';
      }
    }
    zonesToggleBtn.addEventListener('click', () => {
      const isNowCollapsed = zonesEl.classList.toggle('collapsed');
      zonesToggleBtn.setAttribute('aria-expanded', (!isNowCollapsed).toString());
      const txt = zonesEl.classList.contains('collapsed') ? 'Show all times' : 'Show fewer';
      zonesToggleBtn.querySelector('.zonesToggleText').textContent = txt;
    });
    window.addEventListener('resize', updateZonesCollapsed);
    updateZonesCollapsed();

    // Benny overlay toggle with backdrop and close button
    const bennyOverlay = document.getElementById('bennyOverlay');
    const bennyImg = document.getElementById('bennyImg');
    const bennyBackdrop = document.getElementById('bennyBackdrop');
    const bennyClose = document.getElementById('bennyClose');
    let lastFocused = null;

    function showBenny() {
      lastFocused = document.activeElement;
      bennyOverlay.classList.add('active');
      bennyOverlay.setAttribute('aria-hidden', 'false');
      // Focus the close button for keyboard users
      bennyClose.focus();
    }

    function hideBenny() {
      bennyOverlay.classList.remove('active');
      bennyOverlay.setAttribute('aria-hidden', 'true');
      // Return focus to triggering control if possible
      if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
    }

    // Backdrop and close button both close overlay (tap/click friendly)
    bennyBackdrop.addEventListener('click', hideBenny);
    bennyClose.addEventListener('click', hideBenny);

    // Close overlay on ESC
    document.addEventListener('keydown', (ev) => { if (ev.key === 'Escape') hideBenny(); });

    // Find all text occurrences of "Benny" inside the main wrapper and replace them with triggers
    function wrapBennyOccurrences(root) {
      const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, null, false);
      const textNodes = [];
      while (walker.nextNode()) textNodes.push(walker.currentNode);

      textNodes.forEach(node => {
        const val = node.nodeValue;
        if (!val || val.indexOf('Benny') === -1) return;
        const frag = document.createDocumentFragment();
        let start = 0;
        while (true) {
          const i = val.indexOf('Benny', start);
          if (i === -1) { frag.appendChild(document.createTextNode(val.slice(start))); break; }
          if (i > start) frag.appendChild(document.createTextNode(val.slice(start, i)));
          const span = document.createElement('span');
          span.className = 'benny-trigger';
          span.textContent = 'Benny';
          span.style.cursor = 'pointer';
          frag.appendChild(span);
          start = i + 5;
        }
        node.parentNode.replaceChild(frag, node);
      });
    }

    wrapBennyOccurrences(document.querySelector('.wrap'));

    // Attach handlers to triggers
    const triggers = Array.from(document.querySelectorAll('.benny-trigger'));
    let hoverTimeout = null;
    function cancelHide() { if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; } }
    function scheduleHide(delay = 250) { cancelHide(); hoverTimeout = setTimeout(() => { hideBenny(); hoverTimeout = null; }, delay); }

    triggers.forEach(t => {
      t.addEventListener('mouseenter', () => { cancelHide(); showBenny(); });
      t.addEventListener('mouseleave', () => { scheduleHide(); });
      t.addEventListener('click', (ev) => { ev.preventDefault(); cancelHide(); showBenny(); });
      t.addEventListener('touchstart', (ev) => { ev.preventDefault(); cancelHide(); showBenny(); }, { passive: false });
    });

    // Keep overlay open while hovering overlay itself
    bennyOverlay.addEventListener('mouseenter', () => { cancelHide(); });
    bennyOverlay.addEventListener('mouseleave', () => { scheduleHide(); });
  </script>
</body>
</html>
